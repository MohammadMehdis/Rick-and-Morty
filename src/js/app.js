document.addEventListener("DOMContentLoaded", () => {
  const searchBox = document.getElementById("search");

  RenderCarchter();

  searchBox.addEventListener("input", (e) => {
    const keyword = e.target.value.toLowerCase();
    RenderCarchter(keyword);
  });
});

function RenderCarchter(keyword = "") {
  fetch("https://rickandmortyapi.com/api/character")
    .then((response) => {
      if (!response.ok) {
        throw new Error("error");
      }
      return response.json();
    })
    .then((data) => {
      const container = document.querySelector(".grid");
      container.innerHTML = ""; 

      const filter = data.results.filter((character) =>
        character.name.toLowerCase().includes(keyword)
      );

      filter.forEach((character) => {
        const characterDiv = document.createElement("div");
        characterDiv.classList.add(
          "item",
          "p-[1.6rem]",
          "max-w-[29.4rem]",
          "h-[40rem]",
          "flex",
          "flex-col",
          "justify-between",
          "bg-balck-200",
          "rounded-[0.8rem]",
          "relative",
          "max-2xl:max-[24rem]",
          "max-2xl:p-[1rem]"
        );

        let genderColor;
        if (character.gender === "Male") {
          genderColor = "#FF9800";
        } else if (character.gender === "Female") {
          genderColor = "#9DBDFF";
        } else {
          genderColor = "red";
        }
        characterDiv.innerHTML = `
                  <img class="rounded-[1.6rem] h-[20rem]" src="${character.image}" alt="#" />
            <div class="w-[20.1rem] h-[12.8rem] flex flex-col justify-between ">
              <p>${character.name} ${character.status === "Alive" ? "ðŸŸ¢" : "ðŸ”´"}</p>
              <div class="w-[16.5rem] h-[9.4rem] flex flex-col items-center justify-between text-[1.4rem">
                <span
                  class="w-[100%] h-[1.6rem] flex items-center gap-[0.5rem]"
                >
                <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 2C8.13 2 5 5.13 5 9c0 2.87 2.02 5.29 4.74 5.91l-2.75 2.75V20h-3l1-4H3v-2h4.74L3 11l1-1 3.74 3.74V10h2.74L11 6.26V3h1v3.26L14.26 9H17v2.74L20.29 11l1 1-3.55 3.55H21v2h-4.19l1 4h-3v-4.19l-2.75 2.75c2.72-.62 4.74-3.04 4.74-5.91 0-3.87-3.13-7-7-7ZM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5-2.24 5-5 5-5-2.24-5-5Z"
                  fill="${genderColor}"
                />
                    <span>Gender :</span>
                  <span>${character.gender}</span>
                </span>
                <span
                  class="w-[100%] h-[1.6rem] flex items-center gap-[0.5rem]"
                >
                  <span>
                    <svg
                      width="18"
                      height="18"
                      viewBox="0 0 18 18"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M2,9 a7,7 0 0,1 14,0 a35,35 0 0,1 -7,6 a35,35 0 0,1 -7,-6"
                        fill="none"
                        stroke="#007BFF"
                        stroke-width="2"
                      />
                      <path
                        d="M16,9 a7,7 0 0,0 -14,0 a35,35 0 0,0 7,-6 a35,35 0 0,0 7,6"
                        fill="none"
                        stroke="#FFD700"
                        stroke-width="2"
                      />
                    </svg>
                  </span>
                    <span>Kind :</span>
                  <span> ${character.species}</span>
                </span>
                <span
                  class="w-[100%] h-[1.6rem] flex items-center gap-[0.5rem]  "
                >
                  <span>
                    <svg
                      width="16"
                      height="16"
                      viewBox="0 0 16 16"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M15.3194 3.7925C14.8413 2.96813 13.5794 2.7825 11.6631 3.25125C10.776 2.56528 9.71422 2.14186 8.59847 2.02911C7.48272 1.91635 6.35772 2.11877 5.35125 2.61338C4.34479 3.10798 3.49722 3.87495 2.90482 4.82714C2.31242 5.77933 1.99894 6.87857 2 8C2.00008 8.25723 2.01636 8.5142 2.04875 8.76938C0.318127 10.5625 0.343127 11.625 0.681252 12.2075C1 12.76 1.665 13 2.54 13C3.14752 12.9874 3.75145 12.9035 4.33938 12.75C5.22663 13.4353 6.28826 13.8581 7.40372 13.9704C8.51919 14.0828 9.64379 13.8801 10.6499 13.3854C11.6559 12.8907 12.5031 12.1239 13.0953 11.1719C13.6875 10.22 14.0009 9.1211 14 8C14.0001 7.74403 13.9841 7.48831 13.9519 7.23438C14.7331 6.42188 15.2531 5.65 15.43 4.98938C15.5519 4.53188 15.515 4.12938 15.3194 3.7925ZM8 3C9.13247 3.00117 10.2311 3.38621 11.1165 4.09227C12.0019 4.79833 12.6218 5.7837 12.875 6.8875C11.8088 7.89125 10.3656 8.92063 8.99563 9.70813C7.27375 10.6963 5.78 11.3125 4.58875 11.65C3.85505 10.9657 3.34436 10.0764 3.12317 9.09776C2.90197 8.11915 2.98053 7.09663 3.3486 6.16329C3.71667 5.22996 4.35722 4.42906 5.18683 3.86486C6.01645 3.30066 6.99671 2.99929 8 3ZM1.54625 11.7056C1.455 11.5488 1.50563 11.2531 1.685 10.8931C1.86238 10.5558 2.07819 10.2402 2.32813 9.9525C2.57588 10.6703 2.95763 11.3346 3.45313 11.91C2.375 12.0913 1.7025 11.9756 1.54625 11.7056ZM8 13C7.15696 13.0009 6.32757 12.7871 5.59 12.3788C6.94381 11.9 8.25008 11.2961 9.49188 10.575C10.8406 9.80063 12.0344 8.96125 12.9963 8.1325C12.9606 9.43447 12.4188 10.6713 11.4859 11.5801C10.553 12.489 9.30246 12.9984 8 13ZM14.4638 4.73063C14.3575 5.125 14.0769 5.57625 13.6744 6.05125C13.4273 5.33258 13.0455 4.66759 12.5494 4.09188C13.4375 3.945 14.26 3.95625 14.4556 4.29438C14.5119 4.3925 14.515 4.53938 14.4638 4.73063Z"
                        fill="url(#grad1)"
                      />
                      <defs>
                        <linearGradient
                          id="grad1"
                          x1="0%"
                          y1="0%"
                          x2="100%"
                          y2="100%"
                        >
                          <stop
                            offset="0%"
                            style="stop-color: #007bff; stop-opacity: 1"
                          />
                          <stop
                            offset="100%"
                            style="stop-color: #ffd700; stop-opacity: 1"
                          />
                        </linearGradient>
                      </defs>
                    </svg>
                  </span>
                  <span>Id character</span>
                  <span class="text-blue-100">${character.id}</span>
                </span>
              </div>
            </div>
            <span class="absolute top-[60%] right-[5%]">
             <svg class="max-2xl:max-w-[4.5rem] max-2xl:max-h-[4.5rem]" width="48" height="48" viewBox="0 0 225 225" fill="" xmlns="http://www.w3.org/2000/svg">
            <path d="M184.383 39.0421C167.019 30.3601 151.041 31.2633 138.046 36.272C127.106 40.4883 118.326 47.5865 112.499 54.2047C106.671 47.5865 97.8912 40.4883 86.9512 36.272C73.9561 31.2633 57.9779 30.3601 40.6138 39.0421C18.0894 50.3042 9.59286 70.2033 10.9926 91.1995C12.3775 111.973 23.3913 133.833 39.7001 150.141C54.9608 165.402 84.3462 193.028 102.716 207.856C108.438 212.475 116.512 212.701 122.423 208.207C142.5 192.939 169.804 165.634 185.199 150.239L185.297 150.141C201.606 133.833 212.619 111.973 214.005 91.1995C215.404 70.2033 206.908 50.3042 184.383 39.0421Z" fill="#3C3F4"/>
            <path d="M115.312 61.8743C120.26 55.2776 129.132 47.2436 140.576 42.833C151.9 38.4684 165.805 37.6138 181.24 45.3313C200.903 55.1628 208.227 72.1779 206.99 90.732C205.738 109.51 195.658 129.838 180.326 145.169C164.826 160.67 137.823 187.663 118.168 202.61C114.89 205.103 110.394 205.016 107.133 202.385C89.043 187.783 59.8582 160.355 44.6731 145.169C29.3412 129.838 19.2613 109.51 18.0095 90.732C16.7725 72.1779 24.0964 55.1628 43.7594 45.3313C59.1945 37.6138 73.099 38.4684 84.4235 42.833C95.8676 47.2436 104.74 55.2776 109.688 61.8743L112.5 65.6244L115.312 61.8743Z" fill="#393939"/>
            <path d="M168.713 40.7664C158.254 38.3629 148.744 39.6849 140.576 42.8331C129.132 47.2436 120.26 55.2776 115.312 61.8743L112.5 65.6242V81.2039C120.438 64.4225 138.861 42.6354 168.713 40.7664Z" fill="#202020"/>
            <path d="M75.4699 40.298C66.0566 38.5763 55.3387 39.5417 43.7594 45.3313C24.0964 55.1627 16.7725 72.1779 18.0095 90.7319C19.2613 109.51 29.3412 129.838 44.6731 145.17C59.8582 160.355 89.0431 187.783 107.133 202.385C110.394 205.016 114.89 205.103 118.168 202.61C119.714 201.434 121.305 200.184 122.933 198.87C103.124 183.778 76.86 161.61 62.2906 148.587C27.4381 117.435 15.8207 65.5155 62.2906 44.7478C66.7909 42.7365 71.1914 41.28 75.4699 40.298Z" fill="#202020"/>
            <path d="M148.264 117.663C157.8 123.169 173.056 114.597 182.34 98.5175C191.623 82.4381 191.418 64.9401 181.882 59.4346C172.347 53.929 157.09 62.5007 147.807 78.5801C138.524 94.6594 138.728 112.157 148.264 117.663Z" fill="#202020"/>
           </svg>

            </span>
            <div class="w-full h-[10%] flex flex-row-reverse justify-between items-center">
              <a
                class="w-[11.5rem] h-[3.2rem] flex items-center justify-between px-[0.4rem] rounded-[3.2rem] bg-[#36C2CE] max-sm:w-[9rem] max-sm:h-[3rem] max-sm:text-[1.2rem]"
                href="#"
              >
                <svg class="max-sm:w-[1.5rem]"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M12 2.25C10.0716 2.25 8.18657 2.82183 6.58319 3.89317C4.97982 4.96451 3.73013 6.48726 2.99218 8.26884C2.25422 10.0504 2.06114 12.0108 2.43735 13.9021C2.81355 15.7934 3.74215 17.5307 5.10571 18.8943C6.46928 20.2579 8.20656 21.1865 10.0979 21.5627C11.9892 21.9389 13.9496 21.7458 15.7312 21.0078C17.5127 20.2699 19.0355 19.0202 20.1068 17.4168C21.1782 15.8134 21.75 13.9284 21.75 12C21.7473 9.41498 20.7192 6.93661 18.8913 5.10872C17.0634 3.28084 14.585 2.25273 12 2.25ZM12 20.25C10.3683 20.25 8.77326 19.7661 7.41655 18.8596C6.05984 17.9531 5.00242 16.6646 4.378 15.1571C3.75358 13.6496 3.5902 11.9908 3.90853 10.3905C4.22685 8.79016 5.01259 7.32015 6.16637 6.16637C7.32016 5.01259 8.79017 4.22685 10.3905 3.90852C11.9909 3.59019 13.6497 3.75357 15.1571 4.37799C16.6646 5.00242 17.9531 6.05984 18.8596 7.41655C19.7661 8.77325 20.25 10.3683 20.25 12C20.2475 14.1873 19.3775 16.2843 17.8309 17.8309C16.2843 19.3775 14.1873 20.2475 12 20.25ZM13.5 16.5C13.5 16.6989 13.421 16.8897 13.2803 17.0303C13.1397 17.171 12.9489 17.25 12.75 17.25C12.3522 17.25 11.9706 17.092 11.6893 16.8107C11.408 16.5294 11.25 16.1478 11.25 15.75V12C11.0511 12 10.8603 11.921 10.7197 11.7803C10.579 11.6397 10.5 11.4489 10.5 11.25C10.5 11.0511 10.579 10.8603 10.7197 10.7197C10.8603 10.579 11.0511 10.5 11.25 10.5C11.6478 10.5 12.0294 10.658 12.3107 10.9393C12.592 11.2206 12.75 11.6022 12.75 12V15.75C12.9489 15.75 13.1397 15.829 13.2803 15.9697C13.421 16.1103 13.5 16.3011 13.5 16.5ZM10.5 7.875C10.5 7.6525 10.566 7.43499 10.6896 7.24998C10.8132 7.06498 10.9889 6.92078 11.1945 6.83564C11.4001 6.75049 11.6263 6.72821 11.8445 6.77162C12.0627 6.81502 12.2632 6.92217 12.4205 7.0795C12.5778 7.23684 12.685 7.43729 12.7284 7.65552C12.7718 7.87375 12.7495 8.09995 12.6644 8.30552C12.5792 8.51109 12.435 8.68679 12.25 8.8104C12.065 8.93402 11.8475 9 11.625 9C11.3266 9 11.0405 8.88147 10.8295 8.6705C10.6185 8.45952 10.5 8.17337 10.5 7.875Z"
                    fill="white"
                  />
                </svg>

                <span>Saiba mais</span>
              </a>
                  <svg xmlns="http://www.w3.org/2000/svg" 
         xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" 
         width="24" height="24" viewBox="0 0 256 256" xml:space="preserve" fill="white">
        <defs></defs>
        <g style="stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill:; fill-rule: nonzero; opacity: 1;" transform="translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)">
            <path d="M 45 65.864 c -14.039 0 -28.078 -6.087 -42.018 -18.26 L 0 45 l 2.982 -2.604 c 27.882 -24.348 56.156 -24.346 84.036 0 L 90 45 l -2.982 2.604 C 73.078 59.777 59.039 65.864 45 65.864 z M 10.636 45 c 23.09 18.544 45.64 18.544 68.728 0 C 56.276 26.457 33.725 26.456 10.636 45 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill:#808D7C; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
			<path d="M 45 27.715 c -7.664 0 -13.877 6.213 -13.877 13.877 c 0 7.664 6.213 13.877 13.877 13.877 s 13.877 -6.213 13.877 -13.877 C 58.877 33.928 52.664 27.715 45 27.715 z M 51.073 44.188 c -2.878 0 -5.212 -2.333 -5.212 -5.212 c 0 -2.878 2.333 -5.212 5.212 -5.212 c 2.878 0 5.212 2.333 5.212 5.212 C 56.285 41.855 53.951 44.188 51.073 44.188 z" style="stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill:#5F6F65; fill-rule: nonzero; opacity: 1;" transform=" matrix(1 0 0 1 0 0) " stroke-linecap="round" />
        </g>
    </svg>
            </div>
        `;

        container.appendChild(characterDiv);
      });
    })
    .catch((error) => {
      console.error(
        "Error to fetch:",
        error
      );
    });
}
